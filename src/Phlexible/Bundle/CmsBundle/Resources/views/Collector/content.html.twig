{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        {% set status_color = '' %}
        {{ include('@PhlexibleCms/Icon/content.svg') }}
    {% endset %}

    {% set text %}
        <div class="sf-toolbar-info-piece">
            <b>Loaded nodes</b>
            <span class="sf-toolbar-status sf-toolbar-status-">{{ collector.countNodes }}</span>
        </div>
        <div class="sf-toolbar-info-piece">
            <b>Loaded elements</b>
            <span class="sf-toolbar-status sf-toolbar-status-">{{ collector.countElements }}</span>
        </div>
    {% endset %}

    {{ include('@WebProfiler/Profiler/toolbar_item.html.twig', { link: profiler_url, status: status_color }) }}
{% endblock %}

{% block menu %}
    <span class="label {% if collector.countElements %}label-status-{% else %}disabled{% endif %}">
        <span class="icon">{{ include('@PhlexibleCms/Icon/content.svg') }}</span>
        <strong>Content</strong>
    </span>
{% endblock %}

{% block panel %}

    <div class="metrics">
        <div class="metric">
            <span class="value">{{ collector.countNodes }}</span>
            <span class="label">Loaded nodes</span>
        </div>
        <div class="metric">
            <span class="value">{{ collector.countElements }}</span>
            <span class="label">Loaded Elements</span>
        </div>
    </div>

    <div class="sf-tabs">

        <div class="tab">
            <h3 class="tab-title">Loaded nodes <span class="badge">{{ collector.countNodes}}</span></h3>
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>path</th>
                </tr>
                </thead>
                <tbody>
                {% for node in collector.nodes %}
                    <tr>
                        <td style="white-space: nowrap;">{{ node.id }}</td>
                        <td style="white-space: nowrap;">{{ node.title }}</td>
                        <td>{{ node.path|join(" / ") }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <div class="tab-content">
            </div>
        </div>

        <div class="tab">
            <h3 class="tab-title">Loaded elements <span class="badge">{{ collector.countElements}}</span></h3>
            <table>
                <thead>
                <tr>
                    <th>EID</th>
                    <th>Version</th>
                    <th>Language</th>
                </tr>
                </thead>
                <tbody>
                {% for element in collector.elements %}
                    <tr>
                        <td style="white-space: nowrap;">{{ element.eid }}</td>
                        <td style="white-space: nowrap;">{{ element.version }}</td>
                        <td style="white-space: nowrap;">{{ element.language }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <div class="tab-content">
            </div>
        </div>

    </div>


{% endblock %}
